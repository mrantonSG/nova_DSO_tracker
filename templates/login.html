{% extends "base.html" %}
{% block demo_banner %}{% endblock %} {% block title %}Login â€“ DSO Altitude Tracker{% endblock %}

{% block head_extra %}
  <link rel="stylesheet" href="{{ url_for('static', filename='css/login.css') }}">
{% endblock %}

{% block body %}

  {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
      {% for category, message in messages %}
        <div class="flash {{ category }}">{{ message }}</div>
      {% endfor %}
    {% endif %}
  {% endwith %}

<form method="POST" action="{{ url_for('core.login') }}">
    <input type="hidden" name="next" value="{{ request.args.get('next', '') }}">
    <label for="username">Username</label>
    <input type="text" id="username" name="username" required autofocus>

    <label for="password">Password</label>
    <input type="password" id="password" name="password" required>

    <div class="button-row">
      <input type="submit" value="Log In">
      <a href="{{ url_for('core.index') }}" class="guest-button">Continue as Guest</a>
    </div>
  </form>

  <script>
    // auto-hide flash messages
    setTimeout(() => {
      document.querySelectorAll('.flash').forEach(el => el.style.display = 'none');
    }, 4000);
  </script>
{% endblock %}